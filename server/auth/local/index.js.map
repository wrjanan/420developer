{"version":3,"sources":["../../../../server/auth/local/index.js"],"names":[],"mappings":"AAAA;;;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA,IAAI,SAAS,kBAAQ,MAAR,EAAT;;AAEJ,OAAO,IAAP,CAAY,GAAZ,EAAiB,UAAS,GAAT,EAAc,GAAd,EAAmB,IAAnB,EAAyB;AACxC,qBAAS,YAAT,CAAsB,OAAtB,EAA+B,UAAS,GAAT,EAAc,IAAd,EAAoB,IAApB,EAA0B;AACvD,QAAI,QAAQ,OAAO,IAAP,CAD2C;AAEvD,QAAI,KAAJ,EAAW;AACT,aAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,KAArB,CAAP,CADS;KAAX;AAGA,QAAI,CAAC,IAAD,EAAO;AACT,aAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,EAAC,SAAS,yCAAT,EAAtB,CAAP,CADS;KAAX;;AAIA,QAAI,QAAQ,qBAAU,KAAK,GAAL,EAAU,KAAK,IAAL,CAA5B,CATmD;AAUvD,QAAI,IAAJ,CAAS,EAAE,YAAF,EAAT,EAVuD;GAA1B,CAA/B,CAWG,GAXH,EAWQ,GAXR,EAWa,IAXb,EADwC;CAAzB,CAAjB;;kBAee","file":"index.js","sourcesContent":["'use strict';\n\nimport express from 'express';\nimport passport from 'passport';\nimport {signToken} from '../auth.service';\n\nvar router = express.Router();\n\nrouter.post('/', function(req, res, next) {\n  passport.authenticate('local', function(err, user, info) {\n    var error = err || info;\n    if (error) {\n      return res.status(401).json(error);\n    }\n    if (!user) {\n      return res.status(404).json({message: 'Something went wrong, please try again.'});\n    }\n\n    var token = signToken(user._id, user.role);\n    res.json({ token });\n  })(req, res, next)\n});\n\nexport default router;\n"]}